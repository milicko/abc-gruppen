import abcGruppen.*;
import abcGruppen.designHat.DesignFreelyView;
import org.junit.After;
import org.junit.Test;
import static org.junit.Assert.*;

public class AbcGruppenTest {
    public static final String BASE_URL = "https://www.abcgruppen.se/";

    @Test
    public void openForgotPasswordDialog() {

        HomePage homePage = new HomePage();

        homePage.openBrowser(BASE_URL);

        Login login = homePage.goToMyAbc();

        ForgotOrderNumberDialog forgotOrderNumber = login.setOrderNumber("abc123").forgotOrderNumber();

        forgotOrderNumber.setEmail("test@abacgruppen.com").close();

    }

    @Test
    public void designFreelyHat() {

        HomePage homePage = new HomePage();

        homePage.openBrowser(BASE_URL);

        ChooseSchoolDialog chooseSchool = homePage.designHat();
        DesignHatView designHat = chooseSchool.chooseSchoolFromDropDown("Academy of Music and Business Tingsryd").designHat();

        designHat.designFreely().setTextInLeftInput("test left").setTextInRightInput("test right");
    }

    @Test
    public void calculateSelectedValues() {
        int startingValue = 349;


        HomePage homePage = new HomePage();

        homePage.openBrowser(BASE_URL);

        ChooseSchoolDialog chooseSchool = homePage.designHat();
        DesignHatView designHat = chooseSchool.chooseSchoolFromDropDown("Academy of Music and Business Tingsryd").designHat();

        DesignFreelyView designFreely = designHat.designFreely();

        startingValue = startingValue+ designFreely.next().selectTag("Seger").getPriceFromSelector("//span[@class='selection-price']");

        assertEquals(startingValue, designFreely.getPriceFromSelector("//span[@class='navbar-price ml-1']"));

        startingValue = startingValue+ designFreely.next().selectTag("Reflex").getPriceFromSelector("//span[@class='selection-price']");

        assertEquals(startingValue, designFreely.getPriceFromSelector("//span[@class='navbar-price ml-1']"));


        startingValue = startingValue+  designFreely.next().selectTag("Reflex").getPriceFromSelector("//span[@class='selection-price']");

        assertEquals(startingValue, designFreely.getPriceFromSelector("//span[@class='navbar-price ml-1']"));

        startingValue = startingValue+designFreely.next().selectTag("Årtalstryck").getPriceFromSelector("//span[@class='selection-price']");

        assertEquals(startingValue, designFreely.getPriceFromSelector("//span[@class='navbar-price ml-1']"));

        startingValue = startingValue+ designFreely.next().selectTag("Läder").getPriceFromSelector("//span[@class='selection-price']");
        assertEquals(startingValue, designFreely.getPriceFromSelector("//span[@class='navbar-price ml-1']"));

        startingValue = startingValue+  designFreely.next().next().next().next().next().next().selectTag("Kreditkortsficka").getPriceFromSelector("//span[@class='selection-price']");
        assertEquals(startingValue, designFreely.getPriceFromSelector("//span[@class='navbar-price ml-1']"));

        int sum = designFreely.next().next().next().next().next().next().next().next().next().continuee().goToCheckout().getPriceFromSelector("//dt[@class='total']//span[@class='price']");



        System.out.println(sum);


    }

}
